(function(a){a.fn.popover=function(b){var c={bEnsurePlacement:true,iSidePadding:5,iTopPadding:10,placementFunction:function(i,n,l){var g=0,p=0;var w=a(window).width(),m=a(window).height();var f=i.offsetParent(),h=f.outerWidth(),s=f.outerHeight();var j=n.outerWidth(),k=n.outerHeight(),e=j/2,d=0,o=0;var q=i.position(),v=q.left,t=q.top;linkHalf=i.outerWidth()/2;linkPosCenter=0;if(l.bEnsurePlacement){if(w<h){g=w;p=m}else{g=h;p=s}}else{g=h;p=s}function r(){left=v-e+linkHalf;if((left+j)>g||(left<0)){if(left<0){if(i.hasClass("pop-right")){i.removeClass("pop-right")}return 0}else{i.addClass("pop-right");return g-j-l.iSidePadding}}}function u(){if(l.bEnsurePlacement){var y=i.offset().top,x=y+i.outerHeight()+k;var z=m+a(window).scrollTop();if(x>z){i.addClass("pop-up");return t-k-l.iTopPadding}else{if(i.hasClass("pop-up")){i.removeClass("pop-up")}}return t+i.outerHeight()}else{return t+i.outerHeight()}}n.css({top:u(),left:r()})}};c=a.extend(c,b);return this.each(function(d){var f=a(this),e=f.next("div:first"),g=f.parents("ux.content");e.addClass("ux-submenu");f.on("click",function(h){h.preventDefault();if(!e.is(":visible")){f.addClass("selected");if(f.css("top")=="auto"){c.placementFunction(f,e,c)}e.show()}else{f.removeClass("selected");e.hide()}})})}})(jQuery);